<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="../css/testSummary.css">
    <script src="../javascript/question_set.js"></script>
    <script src="../javascript/questionpage.js"></script>


</head>

<style>
    @media (min-width: 768px) {
        .col-md-3 {
            flex: 0 0 auto;
            width: 15%;
        }
    }
</style>

<body style="font-weight: 500;">
    <div class="container-fluid mt-3 " style="font-size: smaller; ">
        <div class="row-sm col-md col-lg ">
            <div class="container" style="background-color: #30729f;max-height: 8rem;">
                <div class="row-sm row -md row-lg" style="margin-left:2% ;">
                     <div class="col-sm-6 col-md-6 col-lg-6 col-xs-6 p-4">
                <div class="card-header text-center text-white  d-flex" style="background-color: #30729f;">
                    <span><img src="../assets/images/th (1).jpg" alt="" height="70px" width="70px">
                    </span>
                    <h1 style="margin-left:10% ;">Online exam name</h1>
               
                     
                </div>
             
            </div>
            <div class="col-sm-3 col-md-3 col-lg-3 col-xs-3">
                <h1>
                   
                    <!--<span id="timer-minutes">00</span> :
                    <span id="timer-seconds">00</span> -->

                </h1>
                <!--<span>Time:&nbsp<span id="times"></span></span>-->
            </div>

            <div class="col-sm col-md col-lg col-xs" style="font-size: smaller;font-weight: 200;">
                <div class="card border-warning mt-2" style="max-width: 20rem;max-height: 7rem;">
                    <div class="card-header text-center"><b> Exam name</b></div>
                    <div class="card-body text-warning">
                     
                      <span class="card-text d-flex"> <b>User Name Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eius, mollitia.</b>

                        <img src="" alt="" height="40px" width="40px" id="tableBannner">
                    <br>
                    
                </span>

                <span><b>Time left:<b> <span id="demo" style="color: red;"></span> </span>
                            <!-- <div id="demo" class="text-danger" style="margin-top: -5%;"><h4> Time left:</h4></div>  -->
                    </div>
                  </div>
                
                <!-- <div class="m-2" style="height: 110px; width:100px;background-color: gray;"></div> -->
            </div>
                </div>
                
            </div>
           
        </div>
    </div>

    <div class="container" style="margin-top:2% ; font-size:small ;background-color: #9ed3f8;box-shadow:4px 4px 4px ;">

        <div class="row">

            <div class="col-md-8 col-sm-8 col-lg-8">
                <form action="">
                    
                    <p><b><span id="timer" style="margin-left: 80%;"></span></b> </p>
                    
                    <!-- Question append -->
                    <div class="card" id="question_append" style="box-shadow: 3px 3px 2px;">
                        
                    </div>

                    <!-- option append -->
                    <div class="card-body" style="background-color:#abdbe3 ;">
                        <div class=" m-4" id="option_dynamic">
                    </div>
                    </div>
                    

                    <div class="row" style="margin-top: 5%; font-size: small; ">
                        <div class="col-sm-3">
                            <button class="btn btn-secondary mt-2 p-2" id="save_previous"> <i
                                    class="fa-solid fa-angles-left"></i>&nbsp;Save and Previous</button>
                        </div>
                        <div class="col-sm-3">
                            <button class="btn btn-danger mt-2 p-2" type="reset" id="clear_response"><i
                                    class="fa-solid fa-ban"></i>
                                &nbsp;Clear response</button>
                        </div>
                        <div class="col-sm-3">
                            <button class="btn btn-primary mt-2 p-2" id="mark_review">Mark for Review &nbsp; <i
                                    class="fa-solid fa-question"></i></button>
                        </div>
                        <div class="col-sm-3">
                            <button type="submit" class="btn btn-warning m-2 p-2" id="navigate">Save and Next &nbsp;<i
                                    class="fa-solid fa-angles-right"></i></button>
                        </div>


                    </div>

                </form>
            </div>
            <div class="col-lg-4 col-sm-4" style="margin-top: 2%;padding-bottom:2%">
                <div class="card">
                    <div class="card-header">

                        <span>
                            <i class="fa-solid fa-square-full" style="color:#007f00"></i> &nbsp Answered
                            <i class="fa-solid fa-square-full" style="color:#48a2b8"></i> &nbsp Not answered</span>
                        <br></br>
                        <span>
                            <i class="fa-solid fa-square-full" style="color:gray"></i> &nbsp Not visited</span>

                    </div>
                    <div class="card-body" id="moveButton">
                        <div class="row" id='nav_question'>


                        </div>
                        <div class="row text- " style="margin-top: 10%; margin-left:5%;width:50%;">
                            <button class="btn btn-success mt-2 p-2" data-bs-target="#testSummary"
                                data-bs-toggle="modal">Submit</button>
                        </div>

                    </div>
                </div>

            </div>
        </div>

    </div>


    <!-- //  Test Summary modal box
            //  Modal -->

    <div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" id="testSummary" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <h1 class="text-center">Test Summary</h1>
                    <div class="row mt-3" style="background-color: white;">
                        <div class="col-md-12 d-flex justify-content-around">
                            <div>
                                <h4>Questions attempted</h4>
                                <div class="progress blue">
                                    <span class="progress-left ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <span class="progress-right ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <div class="progress-value">90%</div>
                                </div>
                            </div>

                            <div>
                                <h4>Questions answered</h4>
                                <div class="progress blue">
                                    <span class="progress-left ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <span class="progress-right ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <div class="progress-value">90%</div>
                                </div>
                            </div>

                            <div>
                                <h4>Total time taken</h4>
                                <div class="progress blue">
                                    <span class="progress-left ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <span class="progress-right ">
                                        <span class="progress-bar "></span>
                                    </span>
                                    <div class="progress-value">90%</div>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="showResult"><a></a>See Result</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    <script src="./questionpage.js"></script>
</body>
<script>


const dataImage= localStorage.getItem("image_data_url");
const bannerImg = document.getElementById("tableBannner");
bannerImg.src="data:image/png;base64"+dataImage;

    var temp_id = '';

    for (let i = 1; i < Question_data.length; i++) {
        // console.log(`${Question_data[i].qid - 1}`);
        var id = `${Question_data[i].qid - 1}`;
        document.getElementById('nav_question').innerHTML += `
    
    <div class=" col-md-3 m-2 text-center" onclick="NextQuestion(${Question_data[i].qid - 2})"  class="opt" id="navigate${Question_data[i].qid}"
                            style="background-color: rgb(174, 170, 170);  width:15%  ; border:1px solid black;text-align-center;">
                            <p>${Question_data[i].qid - 1}</p>
                        </div>
                     
    
    `


    }



    function option(j) {


        if (document.getElementById(j + "optn").checked == true) {

            document.getElementById("navigate" + (parseInt(temp_id) + 1)).setAttribute("style", "background-color: #009900; width:15% ; border:1px solid black;text-align-center;border-radius:10%;");

        }



    }




    document.getElementById('question_append').innerHTML = `
 <div class="card-header">
                   <div ><p><b>Questions :${Question_data[0].qid}</b> </p>
                       <p id="uQuestioN" class="no-box">${Question_data[0].question}</p>
                   </div>
               </div>
              
 `

 
        for (let j = 0; j < Question_data[0].options.length; j++) {

            optn_id = Question_data[0].options[j];
            document.getElementById("option_dynamic").innerHTML +=
                `<input type="${Question_data[0].qtype}" name="l2" onchange="option(${j})" id="${j + "optn"}" ><label for="l2">${Question_data[0].options[j]}</label><br>
`

        }
 




    function NextQuestion(a) {

       

        temp_id = Question_data[a].qid;


        document.getElementById('question_append').innerHTML = `
 <div class="card-header">
                   <div ><p><b>Questions :${Question_data[a].qid}</b> </p>
                       <p id="uQuestioN" class="no-box">${Question_data[a].question}</p>
                   </div>
               </div>
              
 `


 if(sec!=0){
            $("#save_previous").prop('disabled',true);
            $("#mark_review").prop('disabled',true);
        
        }
        else{
            $("#save_previous").prop('disabled',false);
            $("#mark_review").prop('disabled',false);
        }
        var sec = 60;
        var time = setInterval(myTimer, 1000);

        function myTimer() {
            document.getElementById('timer').innerHTML = sec + "sec left";
            sec--;
            if (sec == -1) {
                clearInterval(time);
                alert("Time out!! :(");
            }
        }
        
        document.getElementById("navigate" + (parseInt(temp_id) + 1)).setAttribute("style", "background-color: #48a2b8;");
        $("#option_dynamic").empty();
        for (let j = 0; j < Question_data[a].options.length; j++) {

            optn_id = Question_data[a].options[j];
            document.getElementById("option_dynamic").innerHTML +=
                `<input type="${Question_data[a].qtype}" name="l2" onchange="option(${j})" id="${j + "optn"}" ><label for="l2">${Question_data[a].options[j]}</label><br>
`



        }



    }



</script>

</html>